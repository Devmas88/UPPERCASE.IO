global.CONNECT_TO_SOCKET_SERVER=CONNECT_TO_SOCKET_SERVER=METHOD({run:function(e,t){"use strict";var o,n,r,E,i,T,u,c,s,a=e.host,S=e.port,d={},f=0,C="";CHECK_IS_DATA(t)!==!0?o=t:(o=t.success,n=t.error),s=function(e,t,o){var n=d[e];void 0!==n&&EACH(n,function(e){e(t,function(e){void 0!==c&&void 0!==o&&c({methodName:"__CALLBACK_"+o,data:e})})})},r=Ti.Network.Socket.createTCP({host:a,port:S,connected:function(e){Ti.Stream.pump(e.socket,function(e){if(e.bytesProcessed<0)return i!==!0&&s("__DISCONNECTED"),void r.close();if(e.buffer){var t,o,n;for(C+=e.buffer.toString();-1!==(o=C.indexOf("\n"));)t=C.substring(0,o),n=PARSE_STR(t),void 0!==n&&s(n.methodName,n.data,n.sendKey),C=C.substring(o+1)}},1024,!0),E=!0,o(T=function(e,t){var o=d[e];void 0===o&&(o=d[e]=[]),o.push(t)},u=function(e,t){var o=d[e];void 0!==o&&(void 0!==t?REMOVE({array:o,value:t}):delete d[e])},c=function(e,t){var o="__CALLBACK_"+f;e.sendKey=f,f+=1,Ti.Stream.write(r,Ti.createBuffer({value:STRINGIFY(e)+"\r\n"})),void 0!==t&&T(o,function(e){t(e),u(o)})},function(){i=!0,r.close()})},error:function(e){var t=e.error.toString();E!==!0?void 0!==n?n(t):console.log("[UPPERCASE.JS-CONNECT_TO_SOCKET_SERVER] CONNECT TO SOCKET SERVER FAILED: "+t):s("__ERROR",t)}}),r.connect()}}),global.DELETE=DELETE=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([e,{method:"DELETE"}]),t)}}),global.GET=GET=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([e,{method:"GET"}]),t)}}),global.POST=POST=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([e,{method:"POST"}]),t)}}),global.PUT=PUT=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([e,{method:"PUT"}]),t)}}),global.REQUEST=REQUEST=METHOD({run:function(e,t){"use strict";var o,n,r,E=e.host,i=e.port,T=e.isSecure,u=e.method,c=e.uri,s=void 0!==e.data?"data="+encodeURIComponent(STRINGIFY(e.data)):e.paramStr,a=(T===!0?"https://":"http://")+E+":"+i+"/"+c;CHECK_IS_DATA(t)!==!0?o=t:(o=t.success,n=t.error),s=(void 0===s?"":s+"&")+Date.now(),r=Ti.Network.createHTTPClient({onload:function(){o(this.responseText)},onerror:function(t){var o=t.error;void 0!==n?n(o):console.log("[UPPERCASE.JS-REQUEST] REQUEST FAILED:",e,o)}}),u=u.toUpperCase(),"GET"===u?(r.open(u,a+"?"+s),r.send()):(r.open(u,a),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(s))}}),global.STORE=STORE=CLASS({init:function(e,t,o){"use strict";var n,r,E,i;e.genFullName=n=function(e){return o+"."+e},t.save=r=function(e){var t=e.name,o=e.value;Ti.App.Properties.setString(n(t),STRINGIFY(o))},t.get=E=function(e){var t=Ti.App.Properties.getString(n(e));return PARSE_STR(t===TO_DELETE?void 0:t)},t.remove=i=function(e){Ti.App.Properties.removeProperty(n(e))}}});