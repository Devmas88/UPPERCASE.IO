global.CONNECT_TO_SOCKET_SERVER=CONNECT_TO_SOCKET_SERVER=METHOD({run:function(t,e){"use strict";var o,r,n,E,i,T,u,c,s,a=t.host,S=t.port,d={},C=0,f="";CHECK_IS_DATA(e)!==!0?o=e:(o=e.success,r=e.error),s=function(t,e,o){var r=d[t];void 0!==r&&EACH(r,function(t){t(e,function(t){void 0!==c&&void 0!==o&&c({methodName:"__CALLBACK_"+o,data:t})})})},n=Ti.Network.Socket.createTCP({host:a,port:S,connected:function(t){Ti.Stream.pump(t.socket,function(t){if(t.bytesProcessed<0)return i!==!0&&s("__DISCONNECTED"),void n.close();if(t.buffer){var e,o,r;for(f+=t.buffer.toString();-1!==(o=f.indexOf("\r\n"));)e=f.substring(0,o),r=PARSE_STR(e),void 0!==r&&s(r.methodName,r.data,r.sendKey),f=f.substring(o+1)}},1024,!0),E=!0,o(T=function(t,e){var o=d[t];void 0===o&&(o=d[t]=[]),o.push(e)},u=function(t,e){var o=d[t];void 0!==o&&(void 0!==e?REMOVE({array:o,value:e}):delete d[t])},c=function(t,e){var o="__CALLBACK_"+C;t.sendKey=C,C+=1;try{r.socket.write(Ti.createBuffer({value:STRINGIFY(t)+"\r\n"}))}catch(r){s("__DISCONNECTED")}void 0!==e&&T(o,function(t){e(t),u(o)})},function(){i=!0,n.close()})},error:function(t){var e=t.error.toString();E!==!0?void 0!==r?r(e):console.log("[UPPERCASE.JS-CONNECT_TO_SOCKET_SERVER] CONNECT TO SOCKET SERVER FAILED: "+e):s("__ERROR",e)}}),n.connect()}}),global.DELETE=DELETE=METHOD({run:function(t,e){"use strict";REQUEST(COMBINE([t,{method:"DELETE"}]),e)}}),global.GET=GET=METHOD({run:function(t,e){"use strict";REQUEST(COMBINE([t,{method:"GET"}]),e)}}),global.POST=POST=METHOD({run:function(t,e){"use strict";REQUEST(COMBINE([t,{method:"POST"}]),e)}}),global.PUT=PUT=METHOD({run:function(t,e){"use strict";REQUEST(COMBINE([t,{method:"PUT"}]),e)}}),global.REQUEST=REQUEST=METHOD({run:function(t,e){"use strict";var o,r,n,E=t.host,i=t.port,T=t.isSecure,u=t.method,c=t.uri,s=void 0!==t.data?"data="+encodeURIComponent(STRINGIFY(t.data)):t.paramStr,a=(T===!0?"https://":"http://")+E+":"+i+"/"+c;CHECK_IS_DATA(e)!==!0?o=e:(o=e.success,r=e.error),s=(void 0===s?"":s+"&")+Date.now(),n=Ti.Network.createHTTPClient({onload:function(){o(this.responseText)},onerror:function(e){var o=e.error;void 0!==r?r(o):console.log("[UPPERCASE.JS-REQUEST] REQUEST FAILED:",t,o)}}),u=u.toUpperCase(),"GET"===u?(n.open(u,a+"?"+s),n.send()):(n.open(u,a),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(s))}}),global.STORE=STORE=CLASS({init:function(t,e,o){"use strict";var r,n,E,i;t.genFullName=r=function(t){return o+"."+t},e.save=n=function(t){var e=t.name,o=t.value;Ti.App.Properties.setString(r(e),STRINGIFY(o))},e.get=E=function(t){var e=Ti.App.Properties.getString(r(t));return PARSE_STR(e===TO_DELETE?void 0:e)},e.remove=i=function(t){Ti.App.Properties.removeProperty(r(t))}}});