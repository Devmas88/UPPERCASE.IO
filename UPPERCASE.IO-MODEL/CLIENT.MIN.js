FOR_BOX(function(o){"use strict";o.MODEL=CLASS({init:function(t,e,n){var i,r,d,c,u,a,v,s,E,O,A,f,C,R,N,l,g,m,D,x,I,h,M,S,P,T,H,U,L=n.name,_=n.initData,b=n.methodConfig,p=n.isNotUsingObjectId,K=o.ROOM(L);void 0!==b&&(i=b.create,r=b.get,d=b.update,c=b.remove,u=b.find,a=b.count,v=b.checkIsExists,void 0!==i&&(s=i.valid),void 0!==d&&(E=d.valid)),e.getName=O=function(){return L},t.getInitData=A=function(){return _},t.getCreateValid=f=function(){return s},t.getUpdateValid=C=function(){return E},e.getRoom=R=function(){return K},i!==!1&&(e.create=N=function(t,e){var n,i,r,d,c;void 0!==e&&(CHECK_IS_DATA(e)!==!0?n=e:(n=e.success,i=e.notValid,r=e.notAuthed,d=e.error)),void 0!==_&&EACH(_,function(o,e){t[e]=o}),void 0!==s&&(c=s.check(t)),void 0!==c&&c.checkHasError()===!0?void 0!==i?i(c.getErrors()):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/create` NOT VALID!: ",c.getErrors()):K.send({methodName:"create",data:t},function(t){var e,c,u,a;void 0!==t?(e=t.errorMsg,c=t.validErrors,u=t.isNotAuthed,a=t.savedData,void 0!==e?void 0!==d?d(e):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/create` ERROR: "+e):void 0!==c?void 0!==i?i(c):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/create` NOT VALID!: ",c):u===!0?void 0!==r?r():console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/create` NOT AUTHED!"):void 0!==n&&n(a)):void 0!==n&&n()})}),r!==!1&&(e.get=l=function(t,e){var n,i,r,d;CHECK_IS_DATA(e)!==!0?n=e:(n=e.success,i=e.notExists,r=e.notAuthed,d=e.error),K.send({methodName:"get",data:t},function(t){var e,c,u;void 0!==t&&(e=t.errorMsg,c=t.isNotAuthed,u=t.savedData),void 0!==e?void 0!==d?d(e):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/get` ERROR: "+e):c===!0?void 0!==r?r():console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/get` NOT AUTHED!"):void 0===u?void 0!==i?i():console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/get` NOT EXISTS!"):void 0!==n&&n(u)})},e.getWatching=g=function(t,n){var i,r,d,c,u,a;return CHECK_IS_DATA(n)!==!0?i=n:(i=n.success,r=n.notExists,d=n.notAuthed,c=n.error),e.get(t,{success:function(t){var e;u!==!0&&void 0!==i&&(a=o.ROOM(L+"/"+t.id),i(t,function(o){a.on("update",o)},function(o){a.on("remove",function(t){o(t),e()})},e=function(){void 0!==a&&(a.exit(),a=void 0)}))},notExists:r,notAuthed:d,error:c}),OBJECT({init:function(o,t){var e;t.exit=e=function(){void 0!==a&&a.exit(),u=!0}}})}),d!==!1&&(e.update=m=function(t,e){var n,i,r,d,c,u,a=t.id;void 0!==e&&(CHECK_IS_DATA(e)!==!0?n=e:(n=e.success,i=e.notValid,r=e.notExists,d=e.notAuthed,c=e.error)),void 0!==E&&(u=E.checkForUpdate(t)),t.id=a,void 0!==E&&u.checkHasError()===!0?void 0!==i?i(u.getErrors()):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/update` NOT VALID!: ",u.getErrors()):K.send({methodName:"update",data:t},function(t){var e,u,a,v,s;void 0!==t&&(e=t.errorMsg,u=t.validErrors,a=t.isNotAuthed,v=t.savedData,s=t.originData),void 0!==e?void 0!==c?c(e):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/update` ERROR: "+e):void 0!==u?void 0!==i?i(u):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/update` NOT VALID!: ",u):a===!0?void 0!==d?d():console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/update` NOT AUTHED!"):void 0===v?void 0!==r?r():console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/update` NOT EXISTS!"):void 0!==n&&n(v,s)})}),c!==!1&&p!==!0&&(e.remove=D=function(t,e){var n,i,r,d;void 0!==e&&(CHECK_IS_DATA(e)!==!0?n=e:(n=e.success,i=e.notExists,r=e.notAuthed,d=e.error)),K.send({methodName:"remove",data:t},function(t){var e,c,u;void 0!==t&&(e=t.errorMsg,c=t.isNotAuthed,u=t.originData),void 0!==e?void 0!==d?d(e):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/remove` ERROR: "+e):c===!0?void 0!==r?r():console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/remove` NOT AUTHED!"):void 0===u?void 0!==i?i():console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/remove` NOT EXISTS!"):void 0!==n&&n(u)})}),u!==!1&&(e.find=x=function(t,e){var n,i,r;void 0===e&&(e=t,t=void 0),CHECK_IS_DATA(e)!==!0?n=e:(n=e.success,i=e.notAuthed,r=e.error),K.send({methodName:"find",data:t},function(t){var e=t.errorMsg,d=t.isNotAuthed,c=t.savedDataSet;void 0!==e?void 0!==r?r(e):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/find` ERROR: "+e):d===!0?void 0!==i?i():console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/find` NOT AUTHED!"):void 0!==n&&n(c)})},e.findWatching=I=function(t,n){var i,r,d,c,u={};return void 0===n&&(n=t,t=void 0),CHECK_IS_DATA(n)!==!0?i=n:(i=n.success,r=n.notAuthed,d=n.error),e.find(t,{success:function(t){var e;c!==!0&&void 0!==i&&(EACH(t,function(t){var e=t.id;u[e]=o.ROOM(L+"/"+e)}),i(t,function(o,t){u[o].on("update",t)},function(o,t){u[o].on("remove",function(n){t(n),e(o)})},e=function(o){void 0!==u[o]&&(u[o].exit(),delete u[o])}))},notAuthed:r,error:d}),OBJECT({init:function(o,t){var e;t.exit=e=function(){EACH(u,function(o){o.exit()}),c=!0}}})}),a!==!1&&(e.count=h=function(t,e){var n,i,r;void 0===e&&(e=t,t=void 0),CHECK_IS_DATA(e)!==!0?n=e:(n=e.success,i=e.notAuthed,r=e.error),K.send({methodName:"count",data:t},function(t){var e=t.errorMsg,d=t.isNotAuthed,c=t.count;void 0!==e?void 0!==r?r(e):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/count` ERROR: "+e):d===!0?void 0!==i?i():console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/count` NOT AUTHED!"):void 0!==n&&n(c)})}),v!==!1&&(e.checkIsExists=M=function(t,e){var n,i,r;void 0===e&&(e=t,t=void 0),CHECK_IS_DATA(e)!==!0?n=e:(n=e.success,i=e.notAuthed,r=e.error),K.send({methodName:"checkIsExists",data:t},function(t){var e=t.errorMsg,d=t.isNotAuthed,c=t.isExists;void 0!==e?void 0!==r?r(e):console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/checkIsExists` ERROR: "+e):d===!0?void 0!==i?i():console.log("[UPPERCASE.IO-MODEL] `"+o.boxName+"."+L+"/checkIsExists` NOT AUTHED!"):void 0!==n&&n(c)})}),e.onNew=S=function(t,e){var n;return void 0===e?(e=t,(n=o.ROOM(L+"/create")).on("create",e)):void 0===t?(n=o.ROOM(L+"/create")).on("create",e):EACH(t,function(i,r){return(n=o.ROOM(L+"/"+r+"/"+i+"/create")).on("create",function(o){EACH(t,function(t,e){return o[e]!==t?!1:void 0})===!0&&e(o)}),!1}),OBJECT({init:function(o,t){var e;t.exit=e=function(){void 0!==n&&n.exit()}}})},e.onNewWatching=P=function(t,e){var n,i=[],r=function(t){var n,r,d=t.id;i.push(n=o.ROOM(L+"/"+d)),e(t,function(o){n.on("update",o)},function(o){n.on("remove",function(t){o(t),r()})},r=function(){n.exit(),REMOVE({array:i,value:n})})};return void 0===e?(e=t,(n=o.ROOM(L+"/create")).on("create",function(o){r(o)})):void 0===t?(n=o.ROOM(L+"/create")).on("create",function(o){r(o)}):EACH(t,function(e,i){return(n=o.ROOM(L+"/"+i+"/"+e+"/create")).on("create",function(o){EACH(t,function(t,e){return o[e]!==t?!1:void 0})===!0&&r(o)}),!1}),OBJECT({init:function(o,t){var e;t.exit=e=function(){void 0!==n&&n.exit(),EACH(i,function(o){o.exit()})}}})},u!==!1&&(e.onNewAndFind=T=function(o,t){var e,n,i,r,d,c,u,a,v;return void 0===t&&(t=o,o=void 0),void 0!==o&&(e=o.properties,n=o.filter,i=o.sort,r=o.start,d=o.count),CHECK_IS_DATA(t)!==!0?u=t:(u=t.success,a=t.notAuthed,v=t.error),void 0!==n||void 0!==i||void 0!==r&&0!==r||(c=S(e,u)),x({filter:COMBINE([e,n]),sort:i,start:r,count:d},{success:REVERSE_EACH(u),notAuthed:a,error:v}),OBJECT({init:function(o,t){var e;t.exit=e=function(){void 0!==c&&c.exit()}}})},e.onNewAndFindWatching=H=function(o,t){var e,n,i,r,d,c,u,a,v,s;return void 0===t&&(t=o,o=void 0),void 0!==o&&(e=o.properties,n=o.filter,i=o.sort,r=o.start,d=o.count),CHECK_IS_DATA(t)!==!0?a=t:(a=t.success,v=t.notAuthed,s=t.error),void 0!==n||void 0!==i||void 0!==r&&0!==r||(c=P(e,a)),u=I({filter:COMBINE([e,n]),sort:i,start:r,count:d},{success:function(o,t,e){REVERSE_EACH(o,function(o){a(o,function(e){t(o.id,e)},function(t){e(o.id,t)})})},notAuthed:v,error:s}),OBJECT({init:function(o,t){var e;t.exit=e=function(){void 0!==c&&c.exit(),u.exit()}}})}),e.onRemove=U=function(t,e){var n;return void 0===e?(e=t,(n=o.ROOM(L+"/remove")).on("remove",e)):EACH(t,function(i,r){return(n=o.ROOM(L+"/"+r+"/"+i+"/remove")).on("remove",function(o){EACH(t,function(t,e){return o[e]!==t?!1:void 0})===!0&&e(o)}),!1}),OBJECT({init:function(o,t){var e;t.exit=e=function(){void 0!==n&&n.exit()}}})}}})});