global.CONNECT_TO_WEB_SOCKET_SERVER=CONNECT_TO_WEB_SOCKET_SERVER=METHOD(function(e){"use strict";var o,t,n,i=1e3,c=7,E=0,r=0,d={},v={};return e.request=o=function(e,o){var t=v[e],n=t.contentPieces,i="http://"+t.host+":"+t.port+(void 0===t.clientId?"?":"?clientId="+t.clientId+"&")+"connectionKey="+t.connectionKey+"&requestKey="+e;void 0!==t.script&&t.script.remove(),0===n.length?i+="&isEnd=true":(i+="&content="+n[0],REMOVE({data:n,key:0})),t.script=LOAD(i);try{t.script.getEl().onerror=o}catch(c){}},e.removeRequestInfo=t=function(e){var o=v[e];o.script.remove(),delete o.script,delete v[e]},e.response=n=function(e){var o=PARSE_STR(e);d[o.connectionKey](o.clientId,o.params),t(o.requestKey)},{run:function(e,t){var n,C,s,u,_,a,O,N,T=void 0===e.host?global.location.hostname:T,f=e.fixServerPort,I=E,S={},l=function(e,t,n){var c,E;if(v[r]={host:T,port:f,clientId:e,connectionKey:t,contentPieces:E=[]},void 0!==n)for(c=encodeURIComponent(STRINGIFY(n));""!==c;)E.push(c.substring(0,i)),c=c.substring(i);o(r,function(){R("__DISCONNECTED")}),r+=1},R=function(e,o){var t;_!==!0&&(t=S[e],void 0!==t&&EACH(t,function(t){t(o,function(o){void 0!==N&&N({methodName:"__CALLBACK_"+e,data:o})})}),"__DISCONNECTED"===e&&(void 0!==u&&u.remove(),_=!0))};CHECK_IS_DATA(t)!==!0?n=t:(n=t.success,C=t.error),s=DELAY(5,function(){console.log("[UPPERCASE.IO-CONNECT_TO_WEB_SOCKET_SERVER (FIX)] CONNECT TO WEB SOCKET FIX SERVER FAILED."),void 0!==C&&C("CONNECT TO WEB SOCKET FIX SERVER FAILED.")}),d[I]=function(e,o){void 0!==s?(s.remove(),s=void 0,n(a=function(e,o){var t=S[e];void 0===t&&(t=S[e]=[]),t.push(o)},O=function(e,o){var t=S[e];void 0!==t&&(void 0!==o?REMOVE({data:t,value:o}):delete S[e])},N=function(o,t){var n=o.methodName;l(e,I,o),void 0!==t&&a("__CALLBACK_"+n,function(e){t(e),O("__CALLBACK_"+n)})},function(){l(e,I,{methodName:"__DISCONNECTED"}),_=!0})):void 0!==o&&R(o.methodName,o.data),void 0!==u&&u.remove(),_!==!0&&(u=DELAY(c,function(){R("__DISCONNECTED")}),l(e,I))},l(void 0,I),E+=1}}});