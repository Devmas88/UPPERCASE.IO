OVERRIDE(NODE_CONFIG,function(e){global.NODE_CONFIG=NODE_CONFIG=COMBINE_DATA({origin:e,extend:{maxUploadFileMB:10}})}),global.UPLOAD_SERVER=UPLOAD_SERVER=METHOD(function(){"use strict";var e=require("fs"),o=require("formidable").IncomingForm;return{run:function(r,i){var t,n,E,s,a,u,O,c,l=r.port,R=r.securedPort,P=r.securedKeyFilePath,d=r.securedCertFilePath,A=r.uploadPath;CHECK_IS_DATA(i)!==!0?n=i:(t=i.upload,CHECK_IS_DATA(t)!==!0?n=t:(n=t.success,E=t.error,s=t.overFileSize),a=i.serve,CHECK_IS_DATA(a)!==!0?u=a:(u=t.requestListener,O=t.error,c=t.notExistsResource)),e.exists(A,function(e){e===!1?console.log(CONSOLE_RED("[UPPERCASE.IO-UPLOAD_REQUEST] NOT EXISTS FOLDER!: "+A)):(RESOURCE_SERVER({port:l,securedPort:R,securedKeyFilePath:P,securedCertFilePath:d,rootPath:A,version:"FINAL",isNotParsingNativeReq:!0},{errorHandler:O,notExistsResource:c,requestListener:function(e,r,i,t,a,O){var c,l,R,P=e.method,d=e.ip,f=e.nativeReq;return"POST"===P?(c=new o,l=[],R={},c.uploadDir=A,c.on("field",function(e,o){console.log(e,o),R[e]=o}).on("file",function(e,o){console.log(e,o),l.push({tempPath:o.path,size:o.size,name:o.name,type:o.type,lastModifiedTime:o.lastModifiedDate})}).on("end",function(){NEXT(l,[function(e,o){var r=e.tempPath,i=e.size;if(delete e.tempPath,e.ip=d,i>1024*NODE_CONFIG.maxUploadFileMB*1024)return void 0!==s?s(r,i):console.log(CONSOLE_YELLOW("[UPPERCASE.IO-UPLOAD_REQUEST] FILE SIZE IS TOO BIG!("+i+"):"+r)),!1;EACH(R,function(o,r){""!==o.trim()&&(e[r]=o)});var t=e.type;"image/png"===t||"image/jpeg"===t||"image/gif"===t?IMAGEMAGICK_EXPORT_METADATA(r,{error:function(){o(e)},success:function(i){void 0!==i.exif?(e.exif=i.exif,IMAGEMAGICK_CONVERT([r,"-auto-orient",r],{error:errorHandler,success:o})):o()}}):o()},function(){return function(){n(l,e,r)}}])}).on("error",function(e){var o=e.toString();console.log("[UPPERCASE.IO-UPLOAD_REQUEST] ERROR: "+o),void 0!==E&&E(o)}),c.parse(f),!1):void 0!==u?u(e,r,i,t,a,O):void 0}}),console.log("[UPPERCASE.IO-UPLOAD_SERVER] RUNNING UPLOAD SERVER..."+(void 0===l?"":" (PORT:"+l+")")+(void 0===R?"":" (SECURED PORT:"+R+")")))})}}});