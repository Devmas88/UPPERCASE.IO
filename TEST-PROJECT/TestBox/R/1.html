<html>
	<head>
		<title>test</title>
	</head>
	<body>
		<script>
			window.b = 0;
			window.c = 0;

			window.b += 1;

			var script = document.createElement('script');
			script.src = '2.js';
			script.onload = function() {
				window.c += 1;
				if (b === c) {
					window.test();
				};
			};

			script.onreadystatechange = function() {

				var
				// ready state
				readyState = script.readyState;

				if (readyState == 'loaded' || readyState == 'complete') {
					script.onload();
				}
			};

			document.body.appendChild(script);
		</script>
		<script>
			window.test = function() {
				alert(window.a);
			};
		</script>
	</body>
</html>