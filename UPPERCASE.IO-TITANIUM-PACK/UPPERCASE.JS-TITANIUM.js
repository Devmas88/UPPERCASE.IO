global.CONNECT_TO_SOCKET_SERVER=CONNECT_TO_SOCKET_SERVER=METHOD({run:function(e,t){"use strict";var o,n,r,i,E,T,u,s,c,a=e.host,S=e.port,d={},f=0,C="";CHECK_IS_DATA(t)!==!0?o=t:(o=t.success,n=t.error),c=function(e,t,o){var n=d[e];void 0!==n&&EACH(n,function(e){e(t,function(e){void 0!==s&&void 0!==o&&s({methodName:"__CALLBACK_"+o,data:e})})})},r=Ti.Network.Socket.createTCP({host:a,port:S,connected:function(e){var t=e.socket;Ti.Stream.pump(t,function(e){if(e.bytesProcessed<0)return E!==!0&&c("__DISCONNECTED"),void r.close();if(e.buffer){var t,o,n;for(C+=e.buffer.toString();-1!==(o=C.indexOf("\r\n"));)t=C.substring(0,o),n=PARSE_STR(t),void 0!==n&&c(n.methodName,n.data,n.sendKey),C=C.substring(o+1)}},1024,!0),i=!0,o(T=function(e,t){var o=d[e];void 0===o&&(o=d[e]=[]),o.push(t)},u=function(e,t){var o=d[e];void 0!==o&&(void 0!==t?REMOVE({array:o,value:t}):delete d[e])},s=function(e,o){var n="__CALLBACK_"+f;e.sendKey=f,f+=1;try{t.write(Ti.createBuffer({value:STRINGIFY(e)+"\r\n"}))}catch(r){c("__DISCONNECTED")}void 0!==o&&T(n,function(e){o(e),u(n)})},function(){E=!0,r.close()})},error:function(e){var t=e.error.toString();i!==!0?void 0!==n?n(t):console.log("[UPPERCASE.JS-CONNECT_TO_SOCKET_SERVER] CONNECT TO SOCKET SERVER FAILED: "+t):c("__ERROR",t)}}),r.connect()}}),global.DELETE=DELETE=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([e,{method:"DELETE"}]),t)}}),global.GET=GET=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([e,{method:"GET"}]),t)}}),global.POST=POST=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([e,{method:"POST"}]),t)}}),global.PUT=PUT=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([e,{method:"PUT"}]),t)}}),global.REQUEST=REQUEST=METHOD({run:function(e,t){"use strict";var o,n,r,i,E=e.host,T=e.port,u=e.isSecure,s=e.method,c=e.uri,a=e.paramStr,S=e.data;s=s.toUpperCase(),void 0!==c&&-1!==c.indexOf("?")&&(a=c.substring(c.indexOf("?")+1)+(void 0===a?"":"&"+a),c=c.substring(0,c.indexOf("?"))),void 0!==S&&(a=(void 0===a?"":a+"&")+"data="+encodeURIComponent(STRINGIFY(S))),a=(void 0===a?"":a+"&")+Date.now(),CHECK_IS_DATA(t)!==!0?o=t:(o=t.success,n=t.error),r=(u===!0?"https://":"http://")+E+":"+T+"/"+(void 0===c?"":c),i=Ti.Network.createHTTPClient({onload:function(){o(this.responseText)},onerror:function(t){var o=t.error;void 0!==n?n(o):console.log("[UPPERCASE.JS-REQUEST] REQUEST FAILED:",e,o)}}),s=s.toUpperCase(),"GET"===s?(i.open(s,r+"?"+a),i.send()):(i.open(s,r),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(a))}}),global.STORE=STORE=CLASS({init:function(e,t,o){"use strict";var n,r,i,E;e.genFullName=n=function(e){return o+"."+e},t.save=r=function(e){var t=e.name,o=e.value;Ti.App.Properties.setString(n(t),STRINGIFY(o))},t.get=i=function(e){var t=Ti.App.Properties.getString(n(e));return PARSE_STR(t===TO_DELETE?void 0:t)},t.remove=E=function(e){Ti.App.Properties.removeProperty(n(e))}}});