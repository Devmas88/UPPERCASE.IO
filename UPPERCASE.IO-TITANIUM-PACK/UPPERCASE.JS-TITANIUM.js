global.CONNECT_TO_SOCKET_SERVER=CONNECT_TO_SOCKET_SERVER=METHOD({run:function(e,o){"use strict";var t,n,r,i,E,T,u,s,c=e.host,a=e.port,d={},S=0,f="";CHECK_IS_DATA(o)!==!0?t=o:(t=o.success,n=o.error),s=function(e,o,t){var n=d[e];void 0!==n&&EACH(n,function(e){e(o,function(e){void 0!==u&&void 0!==t&&u({methodName:"__CALLBACK_"+t,data:e})})})},r=Ti.Network.Socket.createTCP({host:c,port:a,connected:function(e){var o=e.socket;Ti.Stream.pump(o,function(e){if(e.bytesProcessed<0)return s("__DISCONNECTED"),void r.close();if(void 0!==e.buffer&&e.buffer!==TO_DELETE){var o,t,n;for(f+=e.buffer.toString();-1!==(t=f.indexOf("\r\n"));)o=f.substring(0,t),n=PARSE_STR(o),void 0!==n&&s(n.methodName,n.data,n.sendKey),f=f.substring(t+1)}},1024,!0),i=!0,t(E=function(e,o){var t=d[e];void 0===t&&(t=d[e]=[]),t.push(o)},T=function(e,o){var t=d[e];void 0!==t&&(void 0!==o?REMOVE({array:t,value:o}):delete d[e])},u=function(e,t){var n="__CALLBACK_"+S;e.sendKey=S,S+=1,o.write(Ti.createBuffer({value:STRINGIFY(e)+"\r\n"})),void 0!==t&&E(n,function(e){t(e),T(n)})},function(){s("__DISCONNECTED"),r.close()})},error:function(e){var o=e.error.toString();i!==!0?void 0!==n?n(o):console.log("[UPPERCASE.JS-CONNECT_TO_SOCKET_SERVER] CONNECT TO SOCKET SERVER FAILED: "+o):s("__ERROR",o)}}),r.connect()}}),global.DELETE=DELETE=METHOD({run:function(e,o){"use strict";REQUEST(COMBINE([e,{method:"DELETE"}]),o)}}),global.GET=GET=METHOD({run:function(e,o){"use strict";REQUEST(COMBINE([e,{method:"GET"}]),o)}}),global.POST=POST=METHOD({run:function(e,o){"use strict";REQUEST(COMBINE([e,{method:"POST"}]),o)}}),global.PUT=PUT=METHOD({run:function(e,o){"use strict";REQUEST(COMBINE([e,{method:"PUT"}]),o)}}),global.REQUEST=REQUEST=METHOD({run:function(e,o){"use strict";var t,n,r,i,E=e.host,T=e.port,u=e.isSecure,s=e.method,c=e.uri,a=e.paramStr,d=e.data;s=s.toUpperCase(),void 0!==c&&-1!==c.indexOf("?")&&(a=c.substring(c.indexOf("?")+1)+(void 0===a?"":"&"+a),c=c.substring(0,c.indexOf("?"))),void 0!==d&&(a=(void 0===a?"":a+"&")+"data="+encodeURIComponent(STRINGIFY(d))),a=(void 0===a?"":a+"&")+Date.now(),CHECK_IS_DATA(o)!==!0?t=o:(t=o.success,n=o.error),r=(u===!0?"https://":"http://")+E+":"+T+"/"+(void 0===c?"":c),i=Ti.Network.createHTTPClient({onload:function(){t(this.responseText)},onerror:function(o){var t=o.error;void 0!==n?n(t):console.log("[UPPERCASE.JS-REQUEST] REQUEST FAILED:",e,t)}}),s=s.toUpperCase(),"GET"===s?(i.open(s,r+"?"+a),i.send()):(i.open(s,r),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(a))}}),global.STORE=STORE=CLASS({init:function(e,o,t){"use strict";var n,r,i,E;e.genFullName=n=function(e){return t+"."+e},o.save=r=function(e){var o=e.name,t=e.value;Ti.App.Properties.setString(n(o),STRINGIFY(t))},o.get=i=function(e){var o=Ti.App.Properties.getString(n(e));return PARSE_STR(o===TO_DELETE?void 0:o)},o.remove=E=function(e){Ti.App.Properties.removeProperty(n(e))}}});