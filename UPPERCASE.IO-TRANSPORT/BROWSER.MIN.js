global.CONNECT_TO_WEB_SOCKET_SERVER=METHOD({run:function(o,n){"use strict";var t,E,e,i,_,a,c,C,d=void 0===o.host?BROWSER_CONFIG.host:o.host,r=o.port,s={},u=0;CHECK_IS_DATA(n)!==!0?t=n:(t=n.success,E=n.error),C=function(o,n,t){var E=s[o];void 0!==E&&EACH(E,function(o){o(n,function(o){void 0!==c&&void 0!==t&&c({methodName:"__CALLBACK_"+t,data:o})})})},e=new WebSocket("ws://"+d+":"+r),e.onopen=function(){i=!0,t(_=function(o,n){var t=s[o];void 0===t&&(t=s[o]=[]),t.push(n)},a=function(o,n){var t=s[o];void 0!==t&&(void 0!==n?REMOVE({array:t,value:n}):delete s[o])},c=function(o,n){var t="__CALLBACK_"+u;o.sendKey=u,u+=1,e.send(STRINGIFY(o)),void 0!==n&&_(t,function(o){n(o),a(t)})},function(){e.close()})},e.onmessage=function(o){var n=PARSE_STR(o.data);void 0!==n&&C(n.methodName,n.data,n.sendKey)},e.onclose=function(){C("__DISCONNECTED")},e.onerror=function(o){var n=o.toString();i!==!0?void 0!==E?E(n):console.log("[UPPERCASE.IO-CONNECT_TO_WEB_SOCKET_SERVER] CONNECT TO WEB SOCKET SERVER FAILED: "+n):C("__ERROR",n)}}});