global.CONNECT_TO_WEB_SOCKET_SERVER=CONNECT_TO_WEB_SOCKET_SERVER=METHOD({run:function(o,n){"use strict";var E,t,e,i,_,a,C,c,d,r=void 0===o.host?global.location.hostname:o.host,s=o.port,u={},v=0;CHECK_IS_DATA(n)!==!0?E=n:(E=n.success,t=n.error),d=function(o,n,E){var t=u[o];void 0!==t&&EACH(t,function(o){o(n,function(o){void 0!==c&&void 0!==E&&c({methodName:"__CALLBACK_"+E,data:o})})})},e=new WebSocket("ws://"+r+":"+s),e.onopen=function(){i=!0,E(a=function(o,n){var E=u[o];void 0===E&&(E=u[o]=[]),E.push(n)},C=function(o,n){var E=u[o];void 0!==E&&(void 0!==n?REMOVE({array:E,value:n}):delete u[o])},c=function(o,n){var E="__CALLBACK_"+v;o.sendKey=v,v+=1,e.send(STRINGIFY(o)),void 0!==n&&a(E,function(o){n(o),C(E)})},function(){_=!0,e.close()})},e.onmessage=function(o){var n=PARSE_STR(o.data);void 0!==n&&d(n.methodName,n.data,n.sendKey)},e.onclose=function(){_!==!0&&d("__DISCONNECTED")},e.onerror=function(o){var n=o.toString();i!==!0?void 0!==t?t(n):console.log("[UPPERCASE.IO-CONNECT_TO_WEB_SOCKET_SERVER] CONNECT TO WEB SOCKET SERVER FAILED: "+n):d("__ERROR",n)}}});